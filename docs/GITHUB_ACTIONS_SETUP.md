# GitHub Actions è®¾ç½®æŒ‡å—

æœ¬é¡¹ç›®ä½¿ç”¨ GitHub Actions å®žçŽ°è‡ªåŠ¨å®šæ—¶ç­¾åˆ°ã€‚

## ðŸš€ å¿«é€Ÿè®¾ç½®

### 1. Fork æœ¬ä»“åº“

ç‚¹å‡»å³ä¸Šè§’çš„ Fork æŒ‰é’®ï¼Œå°†ä»“åº“ fork åˆ°ä½ çš„è´¦å·ä¸‹ã€‚

### 2. è®¾ç½® GitHub Secrets

åœ¨ä½ çš„ä»“åº“ä¸­ï¼Œè¿›å…¥ **Settings** â†’ **Secrets and variables** â†’ **Actions**ï¼Œæ·»åŠ ä»¥ä¸‹ secretsï¼š

| Secret åç§°                 | è¯´æ˜Ž                   | ç¤ºä¾‹               |
| --------------------------- | ---------------------- | ------------------ |
| `NOTIFICATION_APPKEY`       | é€šçŸ¥æŽ¥å£çš„ appkey      | `49529a60...`      |
| `NOTIFICATION_APPSECRET`    | é€šçŸ¥æŽ¥å£çš„ appsecret   | `e24bc46d...`      |
| `NOTIFICATION_TO_WORK_CODE` | é€šçŸ¥æŽ¥æ”¶äººçš„ work code | `297615`           |
| `USER_ID_1`                 | ç¬¬ä¸€ä¸ªç”¨æˆ·çš„ ID        | `3542`             |
| `USER_COOKIE_1`             | ç¬¬ä¸€ä¸ªç”¨æˆ·çš„ Cookie    | `session=MTc1N...` |
| `USER_ID_2`                 | ç¬¬äºŒä¸ªç”¨æˆ·çš„ ID        | `6159`             |
| `USER_COOKIE_2`             | ç¬¬äºŒä¸ªç”¨æˆ·çš„ Cookie    | `session=MTc1O...` |

#### å¦‚ä½•èŽ·å– Cookieï¼Ÿ

1. ç™»å½• [anyrouter.top](https://anyrouter.top)
2. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
3. åˆ‡æ¢åˆ° **Network** æ ‡ç­¾
4. åˆ·æ–°é¡µé¢æˆ–è¿›è¡Œç­¾åˆ°æ“ä½œ
5. æ‰¾åˆ°è¯·æ±‚ï¼Œåœ¨ **Headers** ä¸­å¤åˆ¶ `Cookie` çš„å€¼

#### å¦‚ä½•èŽ·å–é€šçŸ¥é…ç½®ï¼Ÿ

é€šçŸ¥é…ç½®ç”¨äºŽåœ¨ç­¾åˆ°æˆåŠŸåŽå‘é€é€šçŸ¥æ¶ˆæ¯ã€‚éœ€è¦é…ç½®ï¼š

- `appkey` å’Œ `appsecret`ï¼šé€šçŸ¥æœåŠ¡çš„è®¤è¯ä¿¡æ¯
- `toWorkCode`ï¼šæŽ¥æ”¶é€šçŸ¥çš„ç”¨æˆ·å·¥ä½œç 

### 3. ä¿®æ”¹ç”¨æˆ·æ•°é‡ï¼ˆå¯é€‰ï¼‰

å¦‚æžœä½ çš„ç”¨æˆ·æ•°é‡ä¸æ˜¯ 2 ä¸ªï¼Œéœ€è¦ä¿®æ”¹ `.github/workflows/signin.yml` æ–‡ä»¶ï¼š

```yaml
- name: åˆ›å»ºé…ç½®æ–‡ä»¶
  run: |
    cat > config.yaml << 'EOF'
    dryRun: false

    users:
      - userId: ${{ secrets.USER_ID_1 }}
        cookie: ${{ secrets.USER_COOKIE_1 }}
      - userId: ${{ secrets.USER_ID_2 }}
        cookie: ${{ secrets.USER_COOKIE_2 }}
      # æ·»åŠ æ›´å¤šç”¨æˆ·...
      # - userId: ${{ secrets.USER_ID_3 }}
      #   cookie: ${{ secrets.USER_COOKIE_3 }}
    EOF
```

åŒæ—¶åœ¨ GitHub Secrets ä¸­æ·»åŠ å¯¹åº”çš„ `USER_ID_3`ã€`USER_COOKIE_3` ç­‰ã€‚

### 4. ä¿®æ”¹å®šæ—¶æ—¶é—´ï¼ˆå¯é€‰ï¼‰

é»˜è®¤æ¯ 8 å°æ—¶æ‰§è¡Œä¸€æ¬¡ï¼ˆåŒ—äº¬æ—¶é—´ 08:00, 16:00, 00:00ï¼‰ã€‚å¦‚éœ€ä¿®æ”¹ï¼Œç¼–è¾‘ `.github/workflows/signin.yml`ï¼š

```yaml
schedule:
  # cron è¡¨è¾¾å¼ä½¿ç”¨ UTC æ—¶é—´
  # åŒ—äº¬æ—¶é—´ = UTC + 8
  - cron: '0 */8 * * *' # æ¯ 8 å°æ—¶æ‰§è¡Œä¸€æ¬¡
```

å¸¸ç”¨å®šæ—¶é…ç½®ï¼š

- æ¯ 8 å°æ—¶ä¸€æ¬¡ â†’ `'0 */8 * * *'`ï¼ˆUTC 00:00, 08:00, 16:00ï¼‰
- æ¯ 12 å°æ—¶ä¸€æ¬¡ â†’ `'0 */12 * * *'`ï¼ˆUTC 00:00, 12:00ï¼‰
- æ¯å¤©ä¸€æ¬¡ â†’ `'0 1 * * *'`ï¼ˆåŒ—äº¬æ—¶é—´ 09:00ï¼‰
- æ¯å¤©ä¸¤æ¬¡ â†’ `'0 1,13 * * *'`ï¼ˆåŒ—äº¬æ—¶é—´ 09:00, 21:00ï¼‰

ç‰¹å®šæ—¶é—´è½¬æ¢ï¼š

- åŒ—äº¬æ—¶é—´ 08:00 â†’ UTC 00:00 â†’ `'0 0 * * *'`
- åŒ—äº¬æ—¶é—´ 09:00 â†’ UTC 01:00 â†’ `'0 1 * * *'`
- åŒ—äº¬æ—¶é—´ 10:00 â†’ UTC 02:00 â†’ `'0 2 * * *'`
- åŒ—äº¬æ—¶é—´ 12:00 â†’ UTC 04:00 â†’ `'0 4 * * *'`
- åŒ—äº¬æ—¶é—´ 22:00 â†’ UTC 14:00 â†’ `'0 14 * * *'`

### 5. å¯ç”¨ GitHub Actions

1. è¿›å…¥ä½ çš„ä»“åº“çš„ **Actions** æ ‡ç­¾
2. å¦‚æžœæç¤ºéœ€è¦å¯ç”¨ï¼Œç‚¹å‡» **I understand my workflows, go ahead and enable them**
3. ä½ ä¼šçœ‹åˆ° **ç­¾åˆ°ä»»åŠ¡** å·¥ä½œæµ

### 6. æµ‹è¯•è¿è¡Œ

ç‚¹å‡» **ç­¾åˆ°ä»»åŠ¡** â†’ **Run workflow** â†’ **Run workflow** æŒ‰é’®ï¼Œæ‰‹åŠ¨è§¦å‘ä¸€æ¬¡å·¥ä½œæµï¼ŒéªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®ã€‚

## ðŸ“Š æŸ¥çœ‹ç»“æžœ

æ¯æ¬¡ç­¾åˆ°åŽï¼Œç»“æžœä¼šé€šè¿‡é€šçŸ¥æŽ¥å£å‘é€åˆ°é…ç½®çš„æŽ¥æ”¶äººã€‚é€šçŸ¥å†…å®¹åŒ…æ‹¬ï¼š

- ç­¾åˆ°æ—¥æœŸ
- å„ç”¨æˆ·çš„ç­¾åˆ°çŠ¶æ€
- è´¦æˆ·ä½™é¢ä¿¡æ¯

## ðŸ”§ æ•…éšœæŽ’æŸ¥

### å·¥ä½œæµæ‰§è¡Œå¤±è´¥

1. æ£€æŸ¥ **Actions** æ ‡ç­¾ä¸­çš„æ‰§è¡Œæ—¥å¿—
2. ç¡®è®¤ GitHub Secrets é…ç½®æ­£ç¡®
3. ç¡®è®¤ Cookie æ˜¯å¦è¿‡æœŸï¼ˆé‡æ–°ç™»å½•èŽ·å–æ–°çš„ Cookieï¼‰

### Cookie è¿‡æœŸ

Cookie é€šå¸¸ä¼šåœ¨ä¸€æ®µæ—¶é—´åŽè¿‡æœŸã€‚å¦‚æžœç­¾åˆ°å¤±è´¥ï¼Œè¯·ï¼š

1. é‡æ–°ç™»å½•ç½‘ç«™
2. èŽ·å–æ–°çš„ Cookie
3. æ›´æ–° GitHub Secrets ä¸­çš„å¯¹åº”å€¼

### é€šçŸ¥å‘é€å¤±è´¥

å¦‚æžœé€šçŸ¥å‘é€å¤±è´¥ï¼Œä½†ç­¾åˆ°æˆåŠŸï¼š

1. æ£€æŸ¥é€šçŸ¥é…ç½®ï¼ˆappkeyã€appsecretã€toWorkCodeï¼‰æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤é€šçŸ¥æŽ¥æ”¶äººçš„ work code æœ‰æ•ˆ
3. ç­¾åˆ°ä»ç„¶ä¼šæ­£å¸¸å®Œæˆï¼Œåªæ˜¯é€šçŸ¥æ²¡æœ‰å‘é€

### ç­¾åˆ°æœªæŒ‰æ—¶æ‰§è¡Œ

GitHub Actions çš„å®šæ—¶ä»»åŠ¡å¯èƒ½ä¼šæœ‰å»¶è¿Ÿï¼ˆé€šå¸¸ 5-15 åˆ†é’Ÿï¼‰ï¼Œè¿™æ˜¯æ­£å¸¸çŽ°è±¡ã€‚å¦‚æžœé•¿æ—¶é—´æœªæ‰§è¡Œï¼Œå¯ä»¥æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡ã€‚

## ðŸ”’ å®‰å…¨æç¤º

- âš ï¸ **ä¸è¦å°† Cookie å’Œé€šçŸ¥é…ç½®æäº¤åˆ°ä»£ç ä»“åº“ä¸­**
- âœ… æ‰€æœ‰æ•æ„Ÿä¿¡æ¯éƒ½åº”å­˜å‚¨åœ¨ GitHub Secrets ä¸­
- âœ… ç¡®ä¿ä½ çš„ä»“åº“æ˜¯ç§æœ‰çš„ï¼ˆPrivateï¼‰ï¼Œæˆ–è€…ä¸è¦åœ¨å…¬å¼€ä»“åº“ä¸­ä½¿ç”¨çœŸå®žé…ç½®
- âš ï¸ appkey å’Œ appsecret æ˜¯è®¤è¯å‡­æ®ï¼Œä¸è¦æ³„éœ²

## ðŸ“ æ³¨æ„äº‹é¡¹

1. **GitHub Actions å…è´¹é¢åº¦**ï¼šå…¬å¼€ä»“åº“æ— é™åˆ¶ï¼Œç§æœ‰ä»“åº“æ¯æœˆ 2000 åˆ†é’Ÿ
2. **å®šæ—¶ä»»åŠ¡é™åˆ¶**ï¼šæœ€çŸ­é—´éš”ä¸º 5 åˆ†é’Ÿï¼Œå»ºè®®æ¯å¤©æ‰§è¡Œ 1-2 æ¬¡
3. **ä»“åº“æ´»è·ƒåº¦**ï¼šå¦‚æžœä»“åº“é•¿æœŸæ— æ´»åŠ¨ï¼ŒGitHub å¯èƒ½ä¼šè‡ªåŠ¨ç¦ç”¨å®šæ—¶ä»»åŠ¡

## ðŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æžœé‡åˆ°é—®é¢˜ï¼Œè¯·æäº¤ Issueï¼Œé™„ä¸Šæ‰§è¡Œæ—¥å¿—ï¼ˆè®°å¾—ç§»é™¤æ•æ„Ÿä¿¡æ¯ï¼‰ã€‚
